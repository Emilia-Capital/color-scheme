(()=>{"use strict";const e=window.wp.blocks,t=window.wp.element,s=window.wp.blockEditor,o=window.wp.components,a=window.wp.i18n,r=window.wp.data,l=window.ReactJSXRuntime,c=e=>{const t=e.replace("#","");return.2126*parseInt(t.substring(0,2),16)+.7152*parseInt(t.substring(2,4),16)+.0722*parseInt(t.substring(4,6),16)<128},n=e=>{const t=e.replace("#","");return.2126*parseInt(t.substring(0,2),16)+.7152*parseInt(t.substring(2,4),16)+.0722*parseInt(t.substring(4,6),16)<128},i=JSON.parse('{"apiVersion":2,"name":"my-plugin/color-scheme","title":"Color Scheme","icon":"art","category":"design","description":"A block that displays a color scheme of your choice.","supports":{"align":true},"attributes":{"swatches":{"type":"array","default":[{"name":"Red","color":"#E63027","cmyk":"0,79,83,10"},{"name":"Green","color":"#008000","cmyk":"100,0,100,50"},{"name":"Black","color":"#000000","cmyk":"0,0,0,100"}]},"swatchWidth":{"type":"number","default":150},"swatchHeight":{"type":"number","default":150},"swatchGap":{"type":"number","default":20},"borderWidth":{"type":"number","default":1},"borderRadius":{"type":"number","default":0},"borderColor":{"type":"string","default":"#888888"},"showCMYK":{"type":"boolean","default":false}},"editorScript":"file:./index.js","editorStyle":"file:../assets/editor-style.css","style":"file:../assets/style.css"}');(0,e.registerBlockType)(i.name,{...i,edit:function({attributes:e,setAttributes:n,clientId:i}){const{swatches:h,swatchWidth:d,swatchHeight:m,swatchGap:u,borderWidth:p,borderRadius:w,borderColor:g,showCMYK:x}=e,[b,C]=(0,t.useState)(0),[y,j]=(0,t.useState)(!0),_=(0,r.useSelect)((e=>e("core/block-editor").getBlockSelectionStart()===i),[i]),k=(e,t)=>{const s=[...h];s[e]=t,n({swatches:s})},v=(t,s)=>{console.log("Updating dimensions:",t,s),"both"===s?(n({swatchWidth:t,swatchHeight:t}),f=Math.max(t,e.borderRadius)/2):(n({[s]:t}),f=Math.max(e.swatchHeight,e.swatchWidth)/2)};let f=Math.max(e.swatchHeight,e.swatchWidth)/2;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.InspectorControls,{children:[(0,l.jsx)("div",{style:{padding:"16px"},children:(0,l.jsx)(o.ToggleControl,{style:{marginLeft:"10px"},label:(0,a.__)("Show CMYK values","color-scheme"),checked:x,onChange:()=>n({showCMYK:!x})})}),(0,l.jsxs)(o.PanelBody,{title:(0,a.__)("Swatch dimensions","color-scheme"),initialOpen:!1,children:[y?(0,l.jsx)(o.RangeControl,{label:(0,a.__)("Swatch size","color-scheme"),value:d,onChange:e=>v(e,"both"),min:50,max:300}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.RangeControl,{label:(0,a.__)("Swatch width","color-scheme"),value:d,onChange:e=>v(e,"swatchWidth"),min:50,max:300}),(0,l.jsx)(o.RangeControl,{label:(0,a.__)("Swatch height","color-scheme"),value:m,onChange:e=>v(e,"swatchHeight"),min:50,max:300})]}),(0,l.jsx)(o.ToggleControl,{label:(0,a.__)("Link swatch width & height","color-scheme"),checked:y,onChange:()=>j(!y)}),(0,l.jsx)(o.RangeControl,{label:(0,a.__)("Gap between colors","color-scheme"),value:u,onChange:e=>n({swatchGap:e}),min:0,max:10})]}),(0,l.jsxs)(o.PanelBody,{title:(0,a.__)("Border settings","color-scheme"),initialOpen:!1,children:[(0,l.jsx)(o.RangeControl,{label:(0,a.__)("Border width","color-scheme"),value:p,onChange:e=>n({borderWidth:e}),min:0,max:10}),(0,l.jsx)(o.RangeControl,{label:(0,a.__)("Border radius","color-scheme"),value:w,onChange:e=>n({borderRadius:e}),min:0,max:f}),p>0&&(0,l.jsx)(o.ColorPalette,{value:g,colors:[{name:"White",color:"#FFFFFF"},{name:"Light Gray",color:"#F0F0F0"},{name:"Gray",color:"#888888"},{name:"Dark Gray",color:"#444444"},{name:"Black",color:"#000000"}],label:(0,a.__)("Border color","color-scheme"),onChange:e=>{console.log("New border color:",e),n({borderColor:e})},disableAlpha:!0})]}),(0,l.jsx)(o.PanelBody,{title:(0,a.__)("Edit Swatch","color-scheme"),children:h[b]&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.TextControl,{label:(0,a.__)("Color Name","color-scheme"),value:h[b].name,onChange:e=>k(b,{...h[b],name:e})}),(0,l.jsx)(o.ColorPalette,{value:h[b].color,onChange:e=>k(b,{...h[b],color:e})}),x&&(0,l.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)("label",{children:(0,a.__)("CMYK Values","color-scheme")}),(0,l.jsx)(o.Button,{isLink:!0,className:"calculate",onClick:()=>{const e=(e=>{let t=parseInt(e.substring(1,3),16)/255,s=parseInt(e.substring(3,5),16)/255,o=parseInt(e.substring(5,7),16)/255,a=1-Math.max(t,s,o),r=(1-t-a)/(1-a)||0,l=(1-s-a)/(1-a)||0,c=(1-o-a)/(1-a)||0;return`${Math.round(100*r)},${Math.round(100*l)},${Math.round(100*c)},${Math.round(100*a)}`})(h[b].color);k(b,{...h[b],cmyk:e})},children:(0,a.__)("Calculate","color-scheme")})]}),(0,l.jsx)(o.TextControl,{value:h[b].cmyk,onChange:e=>k(b,{...h[b],cmyk:e})})]})]})})]}),(0,l.jsx)("div",{...(0,s.useBlockProps)(),children:(0,l.jsxs)("div",{style:{"--gapWidth":`${u}px`,"--swatchWidth":`${d}px`,"--swatchHeight":`${m}px`,"--borderWidth":`${p}px`,"--borderRadius":`${w}px`,"--borderColor":`${g}`},className:"swatch_container",children:[h.map(((e,t)=>{const s=_&&b===t?" focus":"";return(0,l.jsxs)("div",{className:"swatch"+(c(e.color)?" dark":"")+s,style:{"--swatchColor":`${e.color}`},onClick:()=>C(t),children:[(0,l.jsx)("span",{className:"name",children:e.name}),(0,l.jsx)("code",{children:e.color.toUpperCase()}),x&&(0,l.jsx)("code",{className:"small",children:"CMYK: "+e.cmyk}),_&&h.length>1&&(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{const t=h.filter(((t,s)=>s!==e));n({swatches:t}),C(Math.max(0,e-1))})(t)},className:"delete","aria-label":(0,a.__)("Delete Swatch","color-scheme"),children:"Ã—"})]},t)})),(0,l.jsxs)(o.Button,{isSecondary:!0,onClick:()=>{const e=[...h,{name:"New Color",color:"#000000"}];n({swatches:e}),C(e.length-1)},className:"add_swatch",children:["+ ",(0,a.__)("Add Swatch","color-scheme")]})]})})]})},save:function({attributes:e}){const{swatches:t,swatchWidth:o,swatchHeight:a,swatchGap:r,borderWidth:c,borderRadius:i,borderColor:h}=e;return(0,l.jsx)("div",{...s.useBlockProps.save(),children:(0,l.jsx)("div",{style:{"--gapWidth":`${r}px`,"--swatchWidth":`${o}px`,"--swatchHeight":`${a}px`,"--borderWidth":`${c}px`,"--borderRadius":`${i}px`,"--borderColor":`${h}`},className:"swatch_container",children:t.map(((e,t)=>(0,l.jsxs)("div",{className:"swatch"+(n(e.color)?" dark":""),style:{"--swatchColor":`${e.color}`},children:[(0,l.jsx)("span",{className:"name",children:e.name}),(0,l.jsx)("code",{children:e.color.toUpperCase()}),e.showCMYK&&(0,l.jsx)("code",{className:"small",children:"CMYK: "+e.cmyk})]},t)))})})}})})();